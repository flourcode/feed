<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background: #000000;
            color: #ffffff;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .app {
            max-width: 680px;
            margin: 0 auto;
            padding: 60px 24px;
        }

        /* Header - Minimal and confident */
        header {
            margin-bottom: 64px;
            opacity: 0;
            animation: fadeIn 0.8s ease forwards;
        }

        h1 {
            font-size: 44px;
            font-weight: 700;
            letter-spacing: -0.03em;
            margin-bottom: 8px;
        }

        /* Articles - Clean reading experience */
        .articles {
            opacity: 0;
            animation: fadeIn 0.6s ease 0.4s forwards;
        }

        article {
            padding: 32px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            cursor: pointer;
            transition: opacity 0.2s ease;
        }

        article:hover {
            opacity: 0.7;
        }

        article:last-child {
            border-bottom: none;
        }

        .article-meta {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 12px;
            font-weight: 500;
            letter-spacing: 0.01em;
        }

        .article-title {
            font-size: 24px;
            font-weight: 600;
            line-height: 1.3;
            letter-spacing: -0.02em;
            margin-bottom: 12px;
            color: #ffffff;
        }

        .article-excerpt {
            font-size: 17px;
            line-height: 1.5;
            color: rgba(255, 255, 255, 0.6);
            letter-spacing: -0.01em;
        }

        /* Loading state */
        .loading {
            text-align: center;
            padding: 80px 0;
            font-size: 17px;
            color: rgba(255, 255, 255, 0.4);
        }

        /* Empty state - Calm and inviting */
        .empty {
            text-align: center;
            padding: 120px 24px;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 24px;
            opacity: 0.2;
        }

        .empty-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 12px;
            letter-spacing: -0.02em;
        }

        .empty-subtitle {
            font-size: 17px;
            color: rgba(255, 255, 255, 0.4);
            line-height: 1.4;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .app {
                padding: 40px 20px;
            }

            h1 {
                font-size: 36px;
            }

            .article-title {
                font-size: 21px;
            }

            .article-excerpt {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <header>
            <h1>Read</h1>
        </header>

        <div id="content"></div>
    </div>

    <script>
        const content = document.getElementById('content');
        let articles = [];

        // Global news feeds
        const feeds = [
            'https://feeds.bbci.co.uk/news/world/rss.xml',
            'https://rss.nytimes.com/services/xml/rss/nyt/World.xml',
            'https://www.theguardian.com/world/rss',
            'https://www.aljazeera.com/xml/rss/all.xml',
            'https://www.reuters.com/rssFeed/worldNews'
        ];

        // Load all feeds automatically
        content.innerHTML = '<div class="loading">Loading...</div>';
        loadAllFeeds();

        async function loadAllFeeds() {
            const allArticles = [];

            for (const url of feeds) {
                try {
                    const proxy = 'https://api.allorigins.win/get?url=';
                    const response = await fetch(proxy + encodeURIComponent(url));
                    const data = await response.json();
                    const parser = new DOMParser();
                    const xml = parser.parseFromString(data.contents, 'text/xml');
                    const items = xml.querySelectorAll('item, entry');
                    
                    Array.from(items).forEach(item => {
                        allArticles.push({
                            title: item.querySelector('title')?.textContent || 'Untitled',
                            link: item.querySelector('link')?.textContent || 
                                  item.querySelector('link')?.getAttribute('href') || '#',
                            description: cleanText(
                                item.querySelector('description')?.textContent || 
                                item.querySelector('summary')?.textContent || 
                                item.querySelector('content')?.textContent || ''
                            ),
                            date: formatDate(
                                item.querySelector('pubDate')?.textContent || 
                                item.querySelector('published')?.textContent || 
                                item.querySelector('updated')?.textContent
                            ),
                            timestamp: new Date(
                                item.querySelector('pubDate')?.textContent || 
                                item.querySelector('published')?.textContent || 
                                item.querySelector('updated')?.textContent || Date.now()
                            )
                        });
                    });
                } catch (error) {
                    console.error('Failed to load feed:', url);
                }
            }

            // Sort by date, newest first
            articles = allArticles.sort((a, b) => b.timestamp - a.timestamp);
            
            if (articles.length > 0) {
                renderArticles();
            } else {
                showEmpty('⚠️', 'Could not load feeds', 'Please try again later');
            }
        }

        function renderArticles() {
            content.innerHTML = '<div class="articles">' +
                articles.map(a => `
                    <article onclick="window.open('${a.link}', '_blank')">
                        <div class="article-meta">${a.date}</div>
                        <div class="article-title">${a.title}</div>
                        ${a.description ? `<div class="article-excerpt">${a.description}</div>` : ''}
                    </article>
                `).join('') +
            '</div>';
        }

        function cleanText(html) {
            const tmp = document.createElement('div');
            tmp.innerHTML = html;
            const text = (tmp.textContent || '').trim();
            return text.length > 200 ? text.substring(0, 200) + '...' : text;
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            
            try {
                const date = new Date(dateString);
                const now = new Date();
                const diff = Math.floor((now - date) / 1000);
                
                if (diff < 3600) return Math.floor(diff / 60) + 'm ago';
                if (diff < 86400) return Math.floor(diff / 3600) + 'h ago';
                if (diff < 604800) return Math.floor(diff / 86400) + 'd ago';
                
                return date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric' 
                });
            } catch (e) {
                return '';
            }
        }

        function showEmpty(icon, title, subtitle) {
            content.innerHTML = `
                <div class="empty">
                    <div class="empty-icon">${icon}</div>
                    <div class="empty-title">${title}</div>
                    ${subtitle ? `<div class="empty-subtitle">${subtitle}</div>` : ''}
                </div>
            `;
        }
    </script>
</body>
</html>
